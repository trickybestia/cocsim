from ..buildings.building import BUILDINGS
from cocsim.game import Game

from .test_map import TestMap


class PracticeGiantSmash(TestMap):
    MAP_BUILDINGS = (
        ("TownHall", 3, 24, 24),
        ("Mortar", 1, 24, 28),
        ("Cannon", 4, 27, 28),
        ("Cannon", 4, 21, 24),
        ("ArcherTower", 3, 25, 21),
        ("ArcherTower", 3, 20, 28),
        ("AirDefense", 0, 28, 25),
        ("ElixirStorage", 3, 31, 25),
        ("ElixirStorage", 3, 28, 21),
        ("Barracks", 4, 32, 17),
        ("Laboratory", 1, 21, 15),
        ("ArmyCamp", 2, 16, 18),
        ("ArmyCamp", 2, 28, 32),
        ("ClanCastle", 0, 32, 32),
        ("Barracks", 4, 24, 35),
        ("Barracks", 4, 34, 29),
        ("ElixirCollector", 3, 21, 35),
        ("ElixirCollector", 3, 17, 23),
        ("ElixirCollector", 3, 28, 18),
        ("ElixirCollector", 3, 25, 18),
        ("GoldStorage", 3, 21, 32),
        ("GoldStorage", 3, 21, 20),
        ("GoldMine", 3, 24, 32),
        ("GoldMine", 3, 18, 32),
        ("GoldMine", 3, 16, 29),
        ("GoldMine", 3, 16, 26),
        ("GoldMine", 3, 30, 28),
        ("BuildersHut", 0, 19, 35),
        ("BuildersHut", 0, 35, 27),
        ("ElixirCollector", 3, 31, 21),
        ("Wall", 3, 19, 31),
        ("Wall", 3, 20, 31),
        ("Wall", 3, 21, 31),
        ("Wall", 3, 22, 31),
        ("Wall", 3, 23, 31),
        ("Wall", 3, 24, 31),
        ("Wall", 3, 25, 31),
        ("Wall", 3, 26, 31),
        ("Wall", 3, 27, 31),
        ("Wall", 3, 28, 31),
        ("Wall", 3, 29, 31),
        ("Wall", 3, 30, 31),
        ("Wall", 3, 31, 31),
        ("Wall", 3, 32, 31),
        ("Wall", 3, 33, 31),
        ("Wall", 3, 33, 28),
        ("Wall", 3, 33, 29),
        ("Wall", 3, 33, 30),
        ("Wall", 3, 34, 20),
        ("Wall", 3, 34, 21),
        ("Wall", 3, 34, 22),
        ("Wall", 3, 34, 23),
        ("Wall", 3, 34, 24),
        ("Wall", 3, 34, 25),
        ("Wall", 3, 34, 26),
        ("Wall", 3, 34, 27),
        ("Wall", 3, 34, 28),
        ("Wall", 3, 29, 24),
        ("Wall", 3, 30, 24),
        ("Wall", 3, 31, 24),
        ("Wall", 3, 32, 24),
        ("Wall", 3, 33, 24),
        ("Wall", 3, 31, 20),
        ("Wall", 3, 32, 20),
        ("Wall", 3, 33, 20),
        ("Wall", 3, 31, 17),
        ("Wall", 3, 31, 18),
        ("Wall", 3, 31, 19),
        ("Wall", 3, 24, 17),
        ("Wall", 3, 25, 17),
        ("Wall", 3, 26, 17),
        ("Wall", 3, 27, 17),
        ("Wall", 3, 28, 17),
        ("Wall", 3, 29, 17),
        ("Wall", 3, 30, 17),
        ("Wall", 3, 24, 18),
        ("Wall", 3, 24, 19),
        ("Wall", 3, 24, 20),
        ("Wall", 3, 24, 21),
        ("Wall", 3, 24, 22),
        ("Wall", 3, 20, 19),
        ("Wall", 3, 21, 19),
        ("Wall", 3, 22, 19),
        ("Wall", 3, 23, 19),
        ("Wall", 3, 20, 20),
        ("Wall", 3, 20, 21),
        ("Wall", 3, 20, 22),
        ("Wall", 3, 20, 23),
        ("Wall", 3, 20, 24),
        ("Wall", 3, 20, 25),
        ("Wall", 3, 20, 26),
        ("Wall", 3, 20, 27),
        ("Wall", 3, 21, 23),
        ("Wall", 3, 22, 23),
        ("Wall", 3, 23, 23),
        ("Wall", 3, 21, 27),
        ("Wall", 3, 22, 27),
        ("Wall", 3, 23, 27),
        ("Wall", 3, 19, 27),
        ("Wall", 3, 19, 28),
        ("Wall", 3, 19, 29),
        ("Wall", 3, 19, 30),
        ("Wall", 3, 23, 28),
        ("Wall", 3, 23, 29),
        ("Wall", 3, 23, 30),
    )

    def load(self, game: Game):
        buildings_dict = dict(
            (building.__name__, building) for building in BUILDINGS
        )

        for name, level, x, y in self.MAP_BUILDINGS:
            game.buildings.append(buildings_dict[name](game, x, y, level))

        game.compute_buildings_count()
        game.compute_collision()
        game.compute_occupied_tiles()
        game.compute_drop_zone()
